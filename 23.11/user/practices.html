
<!DOCTYPE html>


<html lang="en" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Best practices &#8212; cuNumeric  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/params.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=4ea706d9"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/practices';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example notebooks" href="notebooks.html" />
    <link rel="prev" title="Configuration" href="configuration.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">
   

<a class="navbar-brand logo" href="https://nv-legate.github.io/cunumeric">
  
  
  
  
  
  
    <p class="title logo__title">cuNumeric</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../comparison/index.html">
                        Project comparisons
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../versions.html">
                        Versions
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/nv-legate/cunumeric" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../comparison/index.html">
                        Project comparisons
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../developer/index.html">
                        Developer guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../versions.html">
                        Versions
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/nv-legate/cunumeric" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Best practices</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="notebooks.html">Example notebooks</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="notebooks/cholesky.html">Cholesky decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/black_scholes.html">Black-Scholes options pricing</a></li>
<li class="toctree-l2"><a class="reference internal" href="notebooks/stencil.html">Jacobi stencil</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item"><nav class="sidebar-indices-items">
  <p class="sidebar-indices-items__title" role="heading" aria-level="1">Indices</p>
  <ul class="indices-link">
        <li class="toctree-l1">
          <a class="reference internal"
             href="../genindex.html"
             accesskey="I">General Index</a>
        </li>
        <li class="toctree-l1">
          <a class="reference internal" href="../py-modindex.html">Python Module Index</a>
        </li>
  </ul>
</nav></div>
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">User guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Best practices</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="best-practices">
<span id="practices"></span><h1>Best practices<a class="headerlink" href="#best-practices" title="Link to this heading">#</a></h1>
<section id="general-recommendations">
<h2>General Recommendations<a class="headerlink" href="#general-recommendations" title="Link to this heading">#</a></h2>
<p>Following the basics of numpy as documented
<a class="reference external" href="https://numpy.org/doc/stable/user/basics.html">here</a> is highly recommended. Here
we highlight some of the best practices for cuNumeric to avoid commonly
encountered problems related to performance. In general, array-based
computations are recommended.</p>
<p>Availability of each API (e.g., single CPU or Multiple GPUs/Multiple CPUs,
etc.) is noted in the docstring of the API. This would be useful to know while
designing the application since it can impact the scalability.</p>
</section>
<section id="guidelines-on-using-cunumeric-apis">
<h2>Guidelines on using cuNumeric APIs<a class="headerlink" href="#guidelines-on-using-cunumeric-apis" title="Link to this heading">#</a></h2>
<section id="array-creation">
<h3>Array Creation<a class="headerlink" href="#array-creation" title="Link to this heading">#</a></h3>
<p>Create a cuNumeric array from data structures native to Python like lists,
tuples, etc., and operate on the cuNumeric array, as shown in the example
below. Find more details on this here:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Not recommended: Performing large-scale computation using lists</span>
<span class="c1"># and other native Python data structures</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Recommended: Create a cuNumeric array and use array-based operations</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>
</pre></div>
</div>
<p>In the example below, the function <code class="docutils literal notranslate"><span class="pre">transform</span></code> is defined to operate on
scalars. But it can also be used on an array to linearly transform its elements,
thus performing an array-based operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">input</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>

<span class="c1"># Acceptable options</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="indexing">
<h3>Indexing<a class="headerlink" href="#indexing" title="Link to this heading">#</a></h3>
<p>Use array-based implementations as much as possible, and while doing so, ensure
that some of the best practices given below are followed.</p>
<p>If a component of the array needs to be set/updated, use an array-based
implementation instead of an explicit loop-based implementation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># x and y are three-dimensional arrays</span>

<span class="c1"># Not recommended: Naive element-wise implementation</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
        <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>

<span class="c1"># Recommended: Array-based implementation</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>The same recommendation applies when the value we are setting to is a scalar
or when values are set conditionally. We first form the condition array
corresponding to the conditional and then use that to update the array,
essentially breaking it down to three steps:</p>
<ul class="simple">
<li><p>create the condition array</p></li>
<li><p>update the array corresponding to the <cite>if</cite> statement</p></li>
<li><p>update the array corresponding to the <cite>else</cite> statement while noting that
the condition is flipped for the <cite>else</cite> statement.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># x and y are two-dimensional arrays, and we need to update x</span>
<span class="c1"># depending on whether y meets a condition or not.</span>

<span class="c1"># Not recommended: Naive element-wise implementation</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">tol</span><span class="p">):</span>
            <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>
        <span class="k">else</span>
            <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">const</span>

<span class="c1"># Recommended: Array-based implementation</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">tol</span>
<span class="n">x</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>
<span class="n">x</span><span class="p">[</span><span class="o">~</span><span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">const</span>
</pre></div>
</div>
<p>In the example below, using a boolean mask array will be faster than using
indices. For the curious reader, using indices with cuNumeric will require
additional communication that might be undesirable for performance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Not recommended: don&#39;t use nonzero to get indices</span>
<span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">h</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">x</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>

<span class="c1"># Recommended: Use boolean mask to update the array</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">x</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span>
</pre></div>
</div>
<p>When the array needs to be updated from another array based on a condition
that they both satisfy, use <code class="docutils literal notranslate"><span class="pre">putmask</span></code> for better performance. Unlike the
previous example, here <code class="docutils literal notranslate"><span class="pre">x</span></code> is set to twice the value of <code class="docutils literal notranslate"><span class="pre">y</span></code> when the
condition is met.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># We need to update elements of x from y based on a condition</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">tol</span>

<span class="c1"># Acceptable</span>
<span class="n">x</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span> <span class="o">*</span> <span class="mf">2.0</span>

<span class="c1"># Recommended: use putmask to update elements based on a condition</span>
<span class="n">np</span><span class="o">.</span><span class="n">putmask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">cond</span><span class="p">,</span> <span class="n">y</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="logic-functions">
<h3>Logic Functions<a class="headerlink" href="#logic-functions" title="Link to this heading">#</a></h3>
<p>Setting elements of an array that satisfy multiple conditions to a scalar
should be done using logic functions instead of iterating through a loop.
Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Not recommended: naive element-wise update to update x</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">first_cond</span> <span class="ow">and</span> <span class="n">second_cond</span><span class="p">):</span>
            <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>

<span class="c1"># Recommended: Use logical operations.</span>
<span class="n">x</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">first_cond</span><span class="p">,</span> <span class="n">second_cond</span><span class="p">)]</span> <span class="o">=</span> <span class="n">const</span>
</pre></div>
</div>
<p>Refer to the <a class="reference external" href="https://numpy.org/doc/stable/reference/routines.logic.html#logical-operations">documentation for other logical operations</a>.</p>
</section>
<section id="mathematical-functions">
<h3>Mathematical Functions<a class="headerlink" href="#mathematical-functions" title="Link to this heading">#</a></h3>
<p>When there are nested element-wise operations, it is recommended that they
are translated to array-based operations using equivalent cuNumeric APIs, if
possible. Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Not recommended: Naive element-wise implementation</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
        <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">],</span> <span class="n">z</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]),</span> <span class="n">const</span><span class="p">)</span>

<span class="c1"># Recommended: Use array-based implementation</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span> <span class="n">const</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="array-manipulation-routines">
<h3>Array Manipulation Routines<a class="headerlink" href="#array-manipulation-routines" title="Link to this heading">#</a></h3>
<section id="reshape">
<h4>Reshape<a class="headerlink" href="#reshape" title="Link to this heading">#</a></h4>
<p>It’s important to note that in our implementation, <code class="docutils literal notranslate"><span class="pre">reshape</span></code> returns a copy
of the array rather than a view like numpy, so this deviation can cause
differences in results, as shown in the example below. This additional copy
can also make it run slower, so we recommend using it as sparingly as possible.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">12</span><span class="p">,))</span>

<span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>

<span class="k">assert</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">42</span> <span class="c1"># succeeds in NumPy, fails in cuNumeric</span>
</pre></div>
</div>
</section>
<section id="stack">
<h4>Stack<a class="headerlink" href="#stack" title="Link to this heading">#</a></h4>
<p>There is a performance penalty to stacking arrays using
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html#numpy-hstack">hstack</a>
or
<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html#numpy-vstack">vstack</a>
because they incur additional copies of data in our implementation.</p>
</section>
</section>
<section id="i-o-routines">
<h3>I/O Routines<a class="headerlink" href="#i-o-routines" title="Link to this heading">#</a></h3>
<p>As of 23.07, we recommend using <a class="reference external" href="https://github.com/h5py/h5py">h5py</a> to perform I/O.</p>
</section>
</section>
<section id="guidelines-on-designing-cunumeric-applications">
<h2>Guidelines on designing cuNumeric applications<a class="headerlink" href="#guidelines-on-designing-cunumeric-applications" title="Link to this heading">#</a></h2>
<section id="use-output-argument">
<h3>Use Output argument<a class="headerlink" href="#use-output-argument" title="Link to this heading">#</a></h3>
<p>Whenever possible, use the <code class="docutils literal notranslate"><span class="pre">out</span></code> parameter in the APIs, to avoid allocating an
intermediate array in our implementation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Acceptable</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>

<span class="c1"># Recommended for better performance</span>
<span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="vectorize">
<h3>Vectorize<a class="headerlink" href="#vectorize" title="Link to this heading">#</a></h3>
<p>Functions with conditionals that operate on scalars might make array-based
operations less straightforward. The general recommendation in such cases is to
apply the three step process mentioned here where we evaluate the conditional
and then apply it for both the <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> statements. Here is an
example of what approaches might or might not work. The first and second
options have <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> clauses written out as separate array-based
operations while the third option (using the API <code class="docutils literal notranslate"><span class="pre">where</span></code>) includes them both
in one API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Works with scalars but not NumPy arrays</span>
<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>

<span class="c1"># Not Recommended for arrays</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1"># doesn&#39;t work</span>

<span class="c1"># Recommended (1): Use array-based operations</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">x</span><span class="p">[</span><span class="n">cond</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">x</span><span class="p">[</span><span class="o">~</span><span class="n">cond</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span>

<span class="c1"># Recommended (2): Use array-based operations</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">cond</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">where</span><span class="o">=~</span><span class="n">cond</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># Recommended (3): Use array-based operations</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">cond</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="merge-tasks">
<h3>Merge Tasks<a class="headerlink" href="#merge-tasks" title="Link to this heading">#</a></h3>
<p>It is recommended that tasks (e.g., a Python operation like <code class="docutils literal notranslate"><span class="pre">z</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code>,
will be a task) be large enough to execute for at least a millisecond to
mitigate the runtime overheads associated with launching a task. One way to
make the tasks execute for longer is to merge them when possible. This is
especially useful for tasks that are really small, in the order of a few
hundred microseconds or less. Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># x is a 3D array of shape (4, _, _) where only the first three</span>
<span class="c1"># components need to be updated. cond is a 2D bool mask derived from h</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">h</span> <span class="o">&lt;</span> <span class="mf">0.0</span> <span class="c1"># h is a two-dimensional array</span>

<span class="c1"># Updating arrays like this is acceptable</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>
<span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>
<span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>

<span class="c1"># Making them into one is recommended</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="n">cond</span><span class="p">]</span> <span class="o">=</span> <span class="n">const</span>
</pre></div>
</div>
</section>
<section id="avoid-blocking-operations">
<h3>Avoid blocking operations<a class="headerlink" href="#avoid-blocking-operations" title="Link to this heading">#</a></h3>
<p>While this might require more invasive application-level changes, it is often
recommended that any blocking operation in an iterative loop is delayed as much
as possible. Blocking can occur when there is data-dependency between execution
of tasks. In the example below, the runtime will be blocked until the result
from <code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">&lt;</span> <span class="pre">tolerance</span></code> is available since <code class="docutils literal notranslate"><span class="pre">norm</span></code> needs to be fetched from
the processor it is running on to evaluate the conditional.</p>
<p>The current recommended best practice is to design applications such that these
blocking operations are done as sparingly as possible, as permitted by the
computations performed inside the iterative loop. This might manifest in
different ways in applications, so only one illustrative example is provided
here.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># compute() does some computations and returns a multi-dimensional</span>
<span class="c1"># cuNumeric array. The application stops after the iterative computation</span>
<span class="c1"># is converged</span>

<span class="c1"># Acceptable: Performing convergence checks every iteration</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">niterations</span><span class="p">):</span>
    <span class="n">x_current</span> <span class="o">=</span> <span class="n">compute</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">x_current</span> <span class="o">-</span> <span class="n">x_prev</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">norm</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="n">x_prev</span> <span class="o">=</span> <span class="n">x_current</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Recommended: Reduce the frequency of convergence checks</span>
<span class="n">every_niter</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">niterations</span><span class="p">):</span>
    <span class="n">x_current</span> <span class="o">=</span> <span class="n">compute</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span><span class="o">%</span><span class="n">every_niter</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">x_current</span> <span class="o">-</span> <span class="n">x_prev</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">norm</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">break</span>

<span class="c1"># This could potentially be updated one iteration before the</span>
<span class="c1"># convergence check, but that&#39;s not done here</span>
<span class="n">x_prev</span> <span class="o">=</span> <span class="n">x_current</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="measurement">
<h3>Measurement<a class="headerlink" href="#measurement" title="Link to this heading">#</a></h3>
<p>Use legate’s timing tool to measure elapsed time, rather than standard Python
timers. cuNumeric executes work asynchronously when possible, and a standard
Python timer will only measure the time taken to launch the work, not the time
spent in actual computation. Make sure warm-up iterations, initialization, I/O,
and other one-time computations are excluded while timing iterative
computations.</p>
<p>Here is an example of how to measure elapsed time in milliseconds:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cunumeric</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">legate.timing</span> <span class="kn">import</span> <span class="n">time</span>

<span class="n">init</span><span class="p">()</span> <span class="c1"># Initialization step</span>

<span class="c1"># Do few warm-up iterations</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_warmup_iters</span><span class="p">):</span>
    <span class="n">compute</span><span class="p">()</span>

<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">niters</span><span class="p">):</span>
    <span class="n">compute</span><span class="p">()</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>

<span class="n">elapsed_millisecs</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">/</span><span class="mf">1000.0</span>

<span class="n">dump_data</span><span class="p">()</span> <span class="c1"># I/O</span>
</pre></div>
</div>
</section>
</section>
<section id="guidelines-for-performance-benchmarks">
<h2>Guidelines for performance benchmarks<a class="headerlink" href="#guidelines-for-performance-benchmarks" title="Link to this heading">#</a></h2>
<p>Manual partitioning of data for use with message-passing from Python (say,
using mpi4py package) is discouraged. Measure elapsed time using Legate’s
timing tool (as given in the example above) while making sure to skip
initialization steps, warm-up iterations, I/O operations etc., while timing
the application.</p>
<p>Ensure that the problem size is large enough to offset runtime overheads
associated with tasks. A rule of thumb is that the problem size is large
enough for a task granularity of about 1 millisecond (as of release 23.07).</p>
<p>For arrays that are small, or for arrays that operate on a subset of a larger
array, it is recommended that they be merged with similar operations when
possible. For example, in some applications using structured meshes, boundary
conditions are set on a subset of data (at the boundaries only) which typically
tends to be a sequence of very small operations. When possible, boundary
conditions for different variables and different boundaries should be combined.
In general, merging small operations might yield better results.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="configuration.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Configuration</p>
      </div>
    </a>
    <a class="right-next"
       href="notebooks.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Example notebooks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-recommendations">General Recommendations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guidelines-on-using-cunumeric-apis">Guidelines on using cuNumeric APIs</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-creation">Array Creation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing">Indexing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#logic-functions">Logic Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mathematical-functions">Mathematical Functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#array-manipulation-routines">Array Manipulation Routines</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reshape">Reshape</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#stack">Stack</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-o-routines">I/O Routines</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guidelines-on-designing-cunumeric-applications">Guidelines on designing cuNumeric applications</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-output-argument">Use Output argument</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vectorize">Vectorize</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#merge-tasks">Merge Tasks</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avoid-blocking-operations">Avoid blocking operations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#measurement">Measurement</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guidelines-for-performance-benchmarks">Guidelines for performance benchmarks</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2021-2023, NVIDIA.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>